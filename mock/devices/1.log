MockGdeltDevice (2018-03-18)
sensorAgentDescription : dev#1:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 1 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
23829 20180318 0 1 6999 2018-03-18 09:50:43 AU -3.0 
23857 20180318 0 1 7027 2018-03-18 09:50:43 AU -1.0 
23885 20180318 0 1 7055 2018-03-18 09:50:43 AU -8.0 
23901 20180318 0 1 7072 2018-03-18 09:51:51 AU -5.0 
23929 20180318 0 1 7100 2018-03-18 09:51:51 AU 1.0 
23957 20180318 0 1 7128 2018-03-18 09:51:51 AU 1.0 
23985 20180318 0 1 7156 2018-03-18 09:51:51 AU -5.0 
24001 20180318 0 1 7173 2018-03-18 09:52:59 AU -4.0 
24029 20180318 0 1 7201 2018-03-18 09:52:59 AU 1.0 
24057 20180318 0 1 7229 2018-03-18 09:52:59 AU -10.0 
24085 20180318 0 1 7257 2018-03-18 09:52:59 AU 8.0 
24101 20180318 0 1 7274 2018-03-18 09:54:08 AU 5.0 
24129 20180318 0 1 7302 2018-03-18 09:54:08 AU -5.0 
24157 20180318 0 1 7330 2018-03-18 09:54:08 AU 1.0 
24185 20180318 0 1 7358 2018-03-18 09:54:08 AU -2.0 
24201 20180318 0 1 7375 2018-03-18 09:55:16 AU -7.0 
24229 20180318 0 1 7403 2018-03-18 09:55:16 AU 0.0 
24257 20180318 0 1 7431 2018-03-18 09:55:16 AU -6.0 
24285 20180318 0 1 7459 2018-03-18 09:55:16 AU -1.0 
24301 20180318 0 1 7476 2018-03-18 09:56:23 AU -3.0 
24329 20180318 0 1 7504 2018-03-18 09:56:23 AU -10.0 
24357 20180318 0 1 7532 2018-03-18 09:56:23 AU -10.0 
24385 20180318 0 1 7560 2018-03-18 09:56:23 AU 5.0 
24401 20180318 0 1 7577 2018-03-18 09:57:31 AU -7.0 
24429 20180318 0 1 7605 2018-03-18 09:57:31 AU -6.0 
24457 20180318 0 1 7633 2018-03-18 09:57:31 AU -9.0 
24485 20180318 0 1 7661 2018-03-18 09:57:31 AU 3.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 8.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.75}), SensorState: stateID=2({x.1=-5.5}), SensorState: stateID=3({x.1=-3.25}), SensorState: stateID=4({x.1=-1.0}), SensorState: stateID=5({x.1=1.25}), SensorState: stateID=6({x.1=3.5}), SensorState: stateID=7({x.1=5.75}), SensorState: stateID=8({x.1=8.0})]
dataQueue.size() : 27
lastValueInQueue : 3.000000
--- computeSelectedState ---
selectedStateValue : 3.000000
numPossibleStates : 9
selectedState : SensorState: stateID=6({x.1=3.5})
initial selectedState : SensorState: stateID=6({x.1=3.5})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-18 09:58:20","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#1","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":11,"peerFinger":"localhost:49164","timeStamp":"2018-03-18 09:58:20","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 11 (localhost:49164) ***
peerId : 11
peerFinger : localhost:49164

--- Connecting to Peer ---
peerConnectString : tcp://localhost:49164
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeletConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-18 09:58:40', 'peer': 1, 'globaleventid': 7762, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'AU', 'AvgTone': -6.0}
AvgTone : -6.000000
queueSize : 1
lastValueInQueue : -6.000000
--- computeSelectedState ---
selectedStateValue : -6.000000
numPossibleStates : 9
selectedState : SensorState: stateID=2({x.1=-5.5})
new selectedState : SensorState: stateID=2({x.1=-5.5})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent

Msg 2 : {'dt': '2018-03-18 09:59:49', 'peer': 1, 'globaleventid': 7863, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'AU', 'AvgTone': -7.0}
AvgTone : -7.000000
queueSize : 2
lastValueInQueue : -7.000000
--- computeSelectedState ---
selectedStateValue : -7.000000
numPossibleStates : 9
selectedState : SensorState: stateID=1({x.1=-7.75})
new selectedState : SensorState: stateID=1({x.1=-7.75})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
