MockGdeltDevice (2018-03-22 - jeromq4)
sensorAgentDescription : dev#8:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 8 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
66792 20180319 0 8 50391 2018-03-19 07:03:09 FI 7.0 
66808 20180319 0 8 50408 2018-03-19 07:04:16 FI -3.0 
66836 20180319 0 8 50436 2018-03-19 07:04:16 FI -7.0 
66864 20180319 0 8 50464 2018-03-19 07:04:16 FI 3.0 
66892 20180319 0 8 50492 2018-03-19 07:04:16 FI 8.0 
66908 20180319 0 8 50509 2018-03-19 07:05:23 FI 0.0 
66936 20180319 0 8 50537 2018-03-19 07:05:23 FI 1.0 
66964 20180319 0 8 50565 2018-03-19 07:05:23 FI -2.0 
66992 20180319 0 8 50593 2018-03-19 07:05:23 FI 8.0 
67008 20180322 0 8 50610 2018-03-22 21:56:49 FI -4.0 
67036 20180322 0 8 50638 2018-03-22 21:56:49 FI 1.0 
67058 20180322 0 8 50661 2018-03-22 21:57:56 FI 0.0 
67086 20180322 0 8 50689 2018-03-22 21:57:56 FI 4.0 
67108 20180322 0 8 50712 2018-03-22 21:59:02 FI -7.0 
67136 20180322 0 8 50740 2018-03-22 21:59:02 FI 6.0 
67158 20180322 0 8 50763 2018-03-22 22:00:09 FI 4.0 
67186 20180322 0 8 50791 2018-03-22 22:00:09 FI -6.0 
67208 20180322 0 8 50814 2018-03-22 22:01:15 FI 8.0 
67236 20180322 0 8 50842 2018-03-22 22:01:15 FI 2.0 
67258 20180322 0 8 50865 2018-03-22 22:02:21 FI 0.0 
67286 20180322 0 8 50893 2018-03-22 22:02:21 FI -2.0 
67308 20180322 0 8 50916 2018-03-22 22:03:28 FI 5.0 
67336 20180322 0 8 50944 2018-03-22 22:03:28 FI -8.0 
67358 20180322 0 8 50967 2018-03-22 22:04:34 FI -1.0 
67386 20180322 0 8 50995 2018-03-22 22:04:34 FI 1.0 
67408 20180322 0 8 51018 2018-03-22 22:05:41 FI -9.0 
67436 20180322 0 8 51046 2018-03-22 22:05:41 FI 2.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -9.000000
max : 8.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-9.0}), SensorState: stateID=1({x.1=-6.875}), SensorState: stateID=2({x.1=-4.75}), SensorState: stateID=3({x.1=-2.625}), SensorState: stateID=4({x.1=-0.5}), SensorState: stateID=5({x.1=1.625}), SensorState: stateID=6({x.1=3.75}), SensorState: stateID=7({x.1=5.875}), SensorState: stateID=8({x.1=8.0})]
dataQueue.size() : 27
lastValueInQueue : 2.000000
--- computeSelectedState ---
selectedStateValue : 2.000000
numPossibleStates : 9
selectedState : SensorState: stateID=5({x.1=1.625})
initial selectedState : SensorState: stateID=5({x.1=1.625})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-22 22:06:04","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#8","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":18,"peerFinger":"localhost:58092","timeStamp":"2018-03-22 22:06:04","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 18 (localhost:58092) ***
peerId : 18
peerFinger : localhost:58092

--- Connecting to Peer ---
peerConnectString : tcp://localhost:58092
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeltConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-22 22:06:47', 'peer': 8, 'globaleventid': 51097, 'sqldate': '20180322', 'ActionGeo_CountryCode': 'FI', 'AvgTone': 7.0}
AvgTone : 7.000000
queueSize : 1
lastValueInQueue : 7.000000
--- computeSelectedState ---
selectedStateValue : 7.000000
numPossibleStates : 9
selectedState : SensorState: stateID=8({x.1=8.0})
new selectedState : SensorState: stateID=8({x.1=8.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
