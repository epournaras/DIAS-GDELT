MockGdeltDevice (2018-03-18)
sensorAgentDescription : dev#7:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 7 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
23835 20180318 0 7 7005 2018-03-18 09:50:43 EZ -6.0 
23863 20180318 0 7 7033 2018-03-18 09:50:43 EZ -8.0 
23891 20180318 0 7 7061 2018-03-18 09:50:43 EZ 7.0 
23907 20180318 0 7 7078 2018-03-18 09:51:51 EZ 9.0 
23935 20180318 0 7 7106 2018-03-18 09:51:51 EZ -10.0 
23963 20180318 0 7 7134 2018-03-18 09:51:51 EZ 4.0 
23991 20180318 0 7 7162 2018-03-18 09:51:51 EZ 7.0 
24007 20180318 0 7 7179 2018-03-18 09:52:59 EZ 5.0 
24035 20180318 0 7 7207 2018-03-18 09:52:59 EZ 3.0 
24063 20180318 0 7 7235 2018-03-18 09:52:59 EZ 6.0 
24091 20180318 0 7 7263 2018-03-18 09:52:59 EZ 5.0 
24107 20180318 0 7 7280 2018-03-18 09:54:08 EZ 2.0 
24135 20180318 0 7 7308 2018-03-18 09:54:08 EZ 3.0 
24163 20180318 0 7 7336 2018-03-18 09:54:08 EZ -6.0 
24191 20180318 0 7 7364 2018-03-18 09:54:08 EZ -8.0 
24207 20180318 0 7 7381 2018-03-18 09:55:16 EZ -5.0 
24235 20180318 0 7 7409 2018-03-18 09:55:16 EZ -10.0 
24263 20180318 0 7 7437 2018-03-18 09:55:16 EZ 0.0 
24291 20180318 0 7 7465 2018-03-18 09:55:16 EZ -3.0 
24307 20180318 0 7 7482 2018-03-18 09:56:23 EZ -4.0 
24335 20180318 0 7 7510 2018-03-18 09:56:23 EZ 7.0 
24363 20180318 0 7 7538 2018-03-18 09:56:23 EZ -3.0 
24391 20180318 0 7 7566 2018-03-18 09:56:23 EZ -6.0 
24407 20180318 0 7 7583 2018-03-18 09:57:31 EZ 4.0 
24435 20180318 0 7 7611 2018-03-18 09:57:31 EZ -6.0 
24463 20180318 0 7 7639 2018-03-18 09:57:31 EZ 10.0 
24491 20180318 0 7 7667 2018-03-18 09:57:31 EZ 0.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 10.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.5}), SensorState: stateID=2({x.1=-5.0}), SensorState: stateID=3({x.1=-2.5}), SensorState: stateID=4({x.1=0.0}), SensorState: stateID=5({x.1=2.5}), SensorState: stateID=6({x.1=5.0}), SensorState: stateID=7({x.1=7.5}), SensorState: stateID=8({x.1=10.0})]
dataQueue.size() : 27
lastValueInQueue : 0.000000
--- computeSelectedState ---
selectedStateValue : 0.000000
numPossibleStates : 9
selectedState : SensorState: stateID=4({x.1=0.0})
initial selectedState : SensorState: stateID=4({x.1=0.0})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-18 09:58:26","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#7","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":17,"peerFinger":"localhost:49176","timeStamp":"2018-03-18 09:58:26","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 17 (localhost:49176) ***
peerId : 17
peerFinger : localhost:49176

--- Connecting to Peer ---
peerConnectString : tcp://localhost:49176
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeletConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-18 09:58:40', 'peer': 7, 'globaleventid': 7768, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'EZ', 'AvgTone': 5.0}
AvgTone : 5.000000
queueSize : 1
lastValueInQueue : 5.000000
--- computeSelectedState ---
selectedStateValue : 5.000000
numPossibleStates : 9
selectedState : SensorState: stateID=6({x.1=5.0})
new selectedState : SensorState: stateID=6({x.1=5.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent

Msg 2 : {'dt': '2018-03-18 09:59:49', 'peer': 7, 'globaleventid': 7869, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'EZ', 'AvgTone': 3.0}
AvgTone : 3.000000
queueSize : 2
lastValueInQueue : 3.000000
--- computeSelectedState ---
selectedStateValue : 3.000000
numPossibleStates : 9
selectedState : SensorState: stateID=5({x.1=2.5})
new selectedState : SensorState: stateID=5({x.1=2.5})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
