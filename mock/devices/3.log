MockGdeltDevice (2018-03-22 - jeromq4)
sensorAgentDescription : dev#3:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 3 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
66787 20180319 0 3 50386 2018-03-19 07:03:09 BU 1.0 
66803 20180319 0 3 50403 2018-03-19 07:04:16 BU 0.0 
66831 20180319 0 3 50431 2018-03-19 07:04:16 BU 2.0 
66859 20180319 0 3 50459 2018-03-19 07:04:16 BU -5.0 
66887 20180319 0 3 50487 2018-03-19 07:04:16 BU 6.0 
66903 20180319 0 3 50504 2018-03-19 07:05:23 BU -8.0 
66931 20180319 0 3 50532 2018-03-19 07:05:23 BU -7.0 
66959 20180319 0 3 50560 2018-03-19 07:05:23 BU -6.0 
66987 20180319 0 3 50588 2018-03-19 07:05:23 BU 2.0 
67003 20180322 0 3 50605 2018-03-22 21:56:49 BU -7.0 
67031 20180322 0 3 50633 2018-03-22 21:56:49 BU 4.0 
67053 20180322 0 3 50656 2018-03-22 21:57:56 BU 5.0 
67081 20180322 0 3 50684 2018-03-22 21:57:56 BU 5.0 
67103 20180322 0 3 50707 2018-03-22 21:59:02 BU 0.0 
67131 20180322 0 3 50735 2018-03-22 21:59:02 BU -9.0 
67153 20180322 0 3 50758 2018-03-22 22:00:09 BU -1.0 
67181 20180322 0 3 50786 2018-03-22 22:00:09 BU 2.0 
67203 20180322 0 3 50809 2018-03-22 22:01:15 BU -9.0 
67231 20180322 0 3 50837 2018-03-22 22:01:15 BU 2.0 
67253 20180322 0 3 50860 2018-03-22 22:02:21 BU 6.0 
67281 20180322 0 3 50888 2018-03-22 22:02:21 BU -1.0 
67303 20180322 0 3 50911 2018-03-22 22:03:28 BU 3.0 
67331 20180322 0 3 50939 2018-03-22 22:03:28 BU -4.0 
67353 20180322 0 3 50962 2018-03-22 22:04:34 BU 10.0 
67381 20180322 0 3 50990 2018-03-22 22:04:34 BU -10.0 
67403 20180322 0 3 51013 2018-03-22 22:05:41 BU -8.0 
67431 20180322 0 3 51041 2018-03-22 22:05:41 BU 8.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 10.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.5}), SensorState: stateID=2({x.1=-5.0}), SensorState: stateID=3({x.1=-2.5}), SensorState: stateID=4({x.1=0.0}), SensorState: stateID=5({x.1=2.5}), SensorState: stateID=6({x.1=5.0}), SensorState: stateID=7({x.1=7.5}), SensorState: stateID=8({x.1=10.0})]
dataQueue.size() : 27
lastValueInQueue : 8.000000
--- computeSelectedState ---
selectedStateValue : 8.000000
numPossibleStates : 9
selectedState : SensorState: stateID=7({x.1=7.5})
initial selectedState : SensorState: stateID=7({x.1=7.5})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-22 22:05:59","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#3","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":13,"peerFinger":"localhost:51892","timeStamp":"2018-03-22 22:05:59","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 13 (localhost:51892) ***
peerId : 13
peerFinger : localhost:51892

--- Connecting to Peer ---
peerConnectString : tcp://localhost:51892
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeltConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-22 22:06:47', 'peer': 3, 'globaleventid': 51092, 'sqldate': '20180322', 'ActionGeo_CountryCode': 'BU', 'AvgTone': -10.0}
AvgTone : -10.000000
queueSize : 1
lastValueInQueue : -10.000000
--- computeSelectedState ---
selectedStateValue : -10.000000
numPossibleStates : 9
selectedState : SensorState: stateID=0({x.1=-10.0})
new selectedState : SensorState: stateID=0({x.1=-10.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
