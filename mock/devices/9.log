MockGdeltDevice (2018-03-22 - jeromq4)
sensorAgentDescription : dev#9:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 9 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
66793 20180319 0 9 50392 2018-03-19 07:03:09 FR -9.0 
66809 20180319 0 9 50409 2018-03-19 07:04:16 FR -2.0 
66837 20180319 0 9 50437 2018-03-19 07:04:16 FR 5.0 
66865 20180319 0 9 50465 2018-03-19 07:04:16 FR -7.0 
66893 20180319 0 9 50493 2018-03-19 07:04:16 FR -10.0 
66909 20180319 0 9 50510 2018-03-19 07:05:23 FR 7.0 
66937 20180319 0 9 50538 2018-03-19 07:05:23 FR 8.0 
66965 20180319 0 9 50566 2018-03-19 07:05:23 FR 2.0 
66993 20180319 0 9 50594 2018-03-19 07:05:23 FR 7.0 
67009 20180322 0 9 50611 2018-03-22 21:56:49 FR 5.0 
67037 20180322 0 9 50639 2018-03-22 21:56:49 FR -10.0 
67059 20180322 0 9 50662 2018-03-22 21:57:56 FR 3.0 
67087 20180322 0 9 50690 2018-03-22 21:57:56 FR 3.0 
67109 20180322 0 9 50713 2018-03-22 21:59:02 FR 7.0 
67137 20180322 0 9 50741 2018-03-22 21:59:02 FR 6.0 
67159 20180322 0 9 50764 2018-03-22 22:00:09 FR -1.0 
67187 20180322 0 9 50792 2018-03-22 22:00:09 FR 7.0 
67209 20180322 0 9 50815 2018-03-22 22:01:15 FR -7.0 
67237 20180322 0 9 50843 2018-03-22 22:01:15 FR 5.0 
67259 20180322 0 9 50866 2018-03-22 22:02:21 FR 8.0 
67287 20180322 0 9 50894 2018-03-22 22:02:21 FR -3.0 
67309 20180322 0 9 50917 2018-03-22 22:03:28 FR -10.0 
67337 20180322 0 9 50945 2018-03-22 22:03:28 FR -4.0 
67359 20180322 0 9 50968 2018-03-22 22:04:34 FR -3.0 
67387 20180322 0 9 50996 2018-03-22 22:04:34 FR 9.0 
67409 20180322 0 9 51019 2018-03-22 22:05:41 FR -4.0 
67437 20180322 0 9 51047 2018-03-22 22:05:41 FR -10.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 9.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.625}), SensorState: stateID=2({x.1=-5.25}), SensorState: stateID=3({x.1=-2.875}), SensorState: stateID=4({x.1=-0.5}), SensorState: stateID=5({x.1=1.875}), SensorState: stateID=6({x.1=4.25}), SensorState: stateID=7({x.1=6.625}), SensorState: stateID=8({x.1=9.0})]
dataQueue.size() : 27
lastValueInQueue : -10.000000
--- computeSelectedState ---
selectedStateValue : -10.000000
numPossibleStates : 9
selectedState : SensorState: stateID=0({x.1=-10.0})
initial selectedState : SensorState: stateID=0({x.1=-10.0})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-22 22:06:05","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#9","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":19,"peerFinger":"localhost:58887","timeStamp":"2018-03-22 22:06:05","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 19 (localhost:58887) ***
peerId : 19
peerFinger : localhost:58887

--- Connecting to Peer ---
peerConnectString : tcp://localhost:58887
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeltConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-22 22:06:47', 'peer': 9, 'globaleventid': 51098, 'sqldate': '20180322', 'ActionGeo_CountryCode': 'FR', 'AvgTone': -6.0}
AvgTone : -6.000000
queueSize : 1
lastValueInQueue : -6.000000
--- computeSelectedState ---
selectedStateValue : -6.000000
numPossibleStates : 9
selectedState : SensorState: stateID=2({x.1=-5.25})
new selectedState : SensorState: stateID=2({x.1=-5.25})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
