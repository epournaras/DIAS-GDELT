MockGdeltDevice (2018-03-18)
sensorAgentDescription : dev#10:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 10 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
23838 20180318 0 10 7008 2018-03-18 09:50:43 GM -4.0 
23866 20180318 0 10 7036 2018-03-18 09:50:43 GM -5.0 
23894 20180318 0 10 7064 2018-03-18 09:50:43 GM -4.0 
23910 20180318 0 10 7081 2018-03-18 09:51:51 GM 7.0 
23938 20180318 0 10 7109 2018-03-18 09:51:51 GM 9.0 
23966 20180318 0 10 7137 2018-03-18 09:51:51 GM -1.0 
23994 20180318 0 10 7165 2018-03-18 09:51:51 GM 2.0 
24010 20180318 0 10 7182 2018-03-18 09:52:59 GM -2.0 
24038 20180318 0 10 7210 2018-03-18 09:52:59 GM -3.0 
24066 20180318 0 10 7238 2018-03-18 09:52:59 GM -10.0 
24094 20180318 0 10 7266 2018-03-18 09:52:59 GM 2.0 
24110 20180318 0 10 7283 2018-03-18 09:54:08 GM -10.0 
24138 20180318 0 10 7311 2018-03-18 09:54:08 GM 1.0 
24166 20180318 0 10 7339 2018-03-18 09:54:08 GM -6.0 
24194 20180318 0 10 7367 2018-03-18 09:54:08 GM 1.0 
24210 20180318 0 10 7384 2018-03-18 09:55:16 GM 5.0 
24238 20180318 0 10 7412 2018-03-18 09:55:16 GM 9.0 
24266 20180318 0 10 7440 2018-03-18 09:55:16 GM -5.0 
24294 20180318 0 10 7468 2018-03-18 09:55:16 GM -3.0 
24310 20180318 0 10 7485 2018-03-18 09:56:23 GM -3.0 
24338 20180318 0 10 7513 2018-03-18 09:56:23 GM 8.0 
24366 20180318 0 10 7541 2018-03-18 09:56:23 GM 10.0 
24394 20180318 0 10 7569 2018-03-18 09:56:23 GM 1.0 
24410 20180318 0 10 7586 2018-03-18 09:57:31 GM 1.0 
24438 20180318 0 10 7614 2018-03-18 09:57:31 GM -3.0 
24466 20180318 0 10 7642 2018-03-18 09:57:31 GM -2.0 
24494 20180318 0 10 7670 2018-03-18 09:57:31 GM -8.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 10.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.5}), SensorState: stateID=2({x.1=-5.0}), SensorState: stateID=3({x.1=-2.5}), SensorState: stateID=4({x.1=0.0}), SensorState: stateID=5({x.1=2.5}), SensorState: stateID=6({x.1=5.0}), SensorState: stateID=7({x.1=7.5}), SensorState: stateID=8({x.1=10.0})]
dataQueue.size() : 27
lastValueInQueue : -8.000000
--- computeSelectedState ---
selectedStateValue : -8.000000
numPossibleStates : 9
selectedState : SensorState: stateID=1({x.1=-7.5})
initial selectedState : SensorState: stateID=1({x.1=-7.5})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-18 09:58:29","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#10","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":20,"peerFinger":"localhost:49182","timeStamp":"2018-03-18 09:58:29","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 20 (localhost:49182) ***
peerId : 20
peerFinger : localhost:49182

--- Connecting to Peer ---
peerConnectString : tcp://localhost:49182
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeletConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-18 09:58:40', 'peer': 10, 'globaleventid': 7771, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'GM', 'AvgTone': 9.0}
AvgTone : 9.000000
queueSize : 1
lastValueInQueue : 9.000000
--- computeSelectedState ---
selectedStateValue : 9.000000
numPossibleStates : 9
selectedState : SensorState: stateID=8({x.1=10.0})
new selectedState : SensorState: stateID=8({x.1=10.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent

Msg 2 : {'dt': '2018-03-18 09:59:49', 'peer': 10, 'globaleventid': 7872, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'GM', 'AvgTone': 7.0}
AvgTone : 7.000000
queueSize : 2
lastValueInQueue : 7.000000
--- computeSelectedState ---
selectedStateValue : 7.000000
numPossibleStates : 9
selectedState : SensorState: stateID=7({x.1=7.5})
new selectedState : SensorState: stateID=7({x.1=7.5})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
