MockGdeltDevice (2018-03-22 - jeromq4)
sensorAgentDescription : dev#10:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 10 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
66794 20180319 0 10 50393 2018-03-19 07:03:09 GM -8.0 
66810 20180319 0 10 50410 2018-03-19 07:04:16 GM 8.0 
66838 20180319 0 10 50438 2018-03-19 07:04:16 GM -3.0 
66866 20180319 0 10 50466 2018-03-19 07:04:16 GM 6.0 
66894 20180319 0 10 50494 2018-03-19 07:04:16 GM 8.0 
66910 20180319 0 10 50511 2018-03-19 07:05:23 GM 9.0 
66938 20180319 0 10 50539 2018-03-19 07:05:23 GM 3.0 
66966 20180319 0 10 50567 2018-03-19 07:05:23 GM -6.0 
66994 20180319 0 10 50595 2018-03-19 07:05:23 GM 10.0 
67010 20180322 0 10 50612 2018-03-22 21:56:49 GM -7.0 
67038 20180322 0 10 50640 2018-03-22 21:56:49 GM 7.0 
67060 20180322 0 10 50663 2018-03-22 21:57:56 GM 10.0 
67088 20180322 0 10 50691 2018-03-22 21:57:56 GM -6.0 
67110 20180322 0 10 50714 2018-03-22 21:59:02 GM 4.0 
67138 20180322 0 10 50742 2018-03-22 21:59:02 GM -10.0 
67160 20180322 0 10 50765 2018-03-22 22:00:09 GM -1.0 
67188 20180322 0 10 50793 2018-03-22 22:00:09 GM 10.0 
67210 20180322 0 10 50816 2018-03-22 22:01:15 GM -8.0 
67238 20180322 0 10 50844 2018-03-22 22:01:15 GM 10.0 
67260 20180322 0 10 50867 2018-03-22 22:02:21 GM 5.0 
67288 20180322 0 10 50895 2018-03-22 22:02:21 GM 0.0 
67310 20180322 0 10 50918 2018-03-22 22:03:28 GM -5.0 
67338 20180322 0 10 50946 2018-03-22 22:03:28 GM 0.0 
67360 20180322 0 10 50969 2018-03-22 22:04:34 GM 2.0 
67388 20180322 0 10 50997 2018-03-22 22:04:34 GM -8.0 
67410 20180322 0 10 51020 2018-03-22 22:05:41 GM 4.0 
67438 20180322 0 10 51048 2018-03-22 22:05:41 GM -1.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 10.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.5}), SensorState: stateID=2({x.1=-5.0}), SensorState: stateID=3({x.1=-2.5}), SensorState: stateID=4({x.1=0.0}), SensorState: stateID=5({x.1=2.5}), SensorState: stateID=6({x.1=5.0}), SensorState: stateID=7({x.1=7.5}), SensorState: stateID=8({x.1=10.0})]
dataQueue.size() : 27
lastValueInQueue : -1.000000
--- computeSelectedState ---
selectedStateValue : -1.000000
numPossibleStates : 9
selectedState : SensorState: stateID=4({x.1=0.0})
initial selectedState : SensorState: stateID=4({x.1=0.0})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-22 22:06:06","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#10","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":20,"peerFinger":"localhost:63680","timeStamp":"2018-03-22 22:06:06","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 20 (localhost:63680) ***
peerId : 20
peerFinger : localhost:63680

--- Connecting to Peer ---
peerConnectString : tcp://localhost:63680
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeltConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-22 22:06:47', 'peer': 10, 'globaleventid': 51099, 'sqldate': '20180322', 'ActionGeo_CountryCode': 'GM', 'AvgTone': -6.0}
AvgTone : -6.000000
queueSize : 1
lastValueInQueue : -6.000000
--- computeSelectedState ---
selectedStateValue : -6.000000
numPossibleStates : 9
selectedState : SensorState: stateID=2({x.1=-5.0})
new selectedState : SensorState: stateID=2({x.1=-5.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
