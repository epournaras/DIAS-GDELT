MockGdeltDevice (2018-03-18)
sensorAgentDescription : dev#5:1
sensorDescription : SensorA
peerTimeoutMs : 720000
gdeltSelectedSubscribePort : 5555
possibleStatesSampleSize : 27
numberPossibleStates : 9

--- Warmup ---
sql : WITH w_data AS (SELECT * FROM gdelt_test WHERE peer = 5 ORDER BY globaleventid DESC LIMIT 27) SELECT * FROM w_data ORDER BY globaleventid ASC
Connected to database
23833 20180318 0 5 7003 2018-03-18 09:50:43 EI -6.0 
23861 20180318 0 5 7031 2018-03-18 09:50:43 EI -3.0 
23889 20180318 0 5 7059 2018-03-18 09:50:43 EI -7.0 
23905 20180318 0 5 7076 2018-03-18 09:51:51 EI 1.0 
23933 20180318 0 5 7104 2018-03-18 09:51:51 EI 2.0 
23961 20180318 0 5 7132 2018-03-18 09:51:51 EI 3.0 
23989 20180318 0 5 7160 2018-03-18 09:51:51 EI 2.0 
24005 20180318 0 5 7177 2018-03-18 09:52:59 EI -4.0 
24033 20180318 0 5 7205 2018-03-18 09:52:59 EI -2.0 
24061 20180318 0 5 7233 2018-03-18 09:52:59 EI 7.0 
24089 20180318 0 5 7261 2018-03-18 09:52:59 EI 4.0 
24105 20180318 0 5 7278 2018-03-18 09:54:08 EI -4.0 
24133 20180318 0 5 7306 2018-03-18 09:54:08 EI 4.0 
24161 20180318 0 5 7334 2018-03-18 09:54:08 EI -1.0 
24189 20180318 0 5 7362 2018-03-18 09:54:08 EI 6.0 
24205 20180318 0 5 7379 2018-03-18 09:55:16 EI 0.0 
24233 20180318 0 5 7407 2018-03-18 09:55:16 EI 10.0 
24261 20180318 0 5 7435 2018-03-18 09:55:16 EI 3.0 
24289 20180318 0 5 7463 2018-03-18 09:55:16 EI -9.0 
24305 20180318 0 5 7480 2018-03-18 09:56:23 EI -10.0 
24333 20180318 0 5 7508 2018-03-18 09:56:23 EI 10.0 
24361 20180318 0 5 7536 2018-03-18 09:56:23 EI 3.0 
24389 20180318 0 5 7564 2018-03-18 09:56:23 EI -1.0 
24405 20180318 0 5 7581 2018-03-18 09:57:31 EI -2.0 
24433 20180318 0 5 7609 2018-03-18 09:57:31 EI 5.0 
24461 20180318 0 5 7637 2018-03-18 09:57:31 EI -9.0 
24489 20180318 0 5 7665 2018-03-18 09:57:31 EI -1.0 
Disconnected from database
Records processed during warmup : 27
Queue size : 27
dataQueue.size for initial possible states : 27
dataQueue.size() : 27
--- computePossibleStates ---
min : -10.000000
max : 10.000000
--- convertStates ---
numberPossibleStates : 9
initial possibleStates : [SensorState: stateID=0({x.1=-10.0}), SensorState: stateID=1({x.1=-7.5}), SensorState: stateID=2({x.1=-5.0}), SensorState: stateID=3({x.1=-2.5}), SensorState: stateID=4({x.1=0.0}), SensorState: stateID=5({x.1=2.5}), SensorState: stateID=6({x.1=5.0}), SensorState: stateID=7({x.1=7.5}), SensorState: stateID=8({x.1=10.0})]
dataQueue.size() : 27
lastValueInQueue : -1.000000
--- computeSelectedState ---
selectedStateValue : -1.000000
numPossibleStates : 9
selectedState : SensorState: stateID=4({x.1=0.0})
initial selectedState : SensorState: stateID=4({x.1=0.0})
Data queue cleared

--- Connecting to Gateway ---
connecting to gateway tcp://localhost:3427...ok
peerAddressRequestMessageJson : {"timeStamp":"2018-03-18 09:58:24","MessageType":"PeerAddressRequest","srcSensorAgent":{"Host":"dev#5","Port":1},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
sending address request to gateway...ok

waiting for response...ok
incomingMessage : {"peerId":15,"peerFinger":"localhost:49172","timeStamp":"2018-03-18 09:58:24","MessageType":"PeerAddress","srcSensorAgent":{"Host":"localhost","Port":3427},"targetSensorAgent":{"Host":"*","Port":0},"targetSensor":{"sensorType":"*","SensorName":"*"}}
disconnecting...ok
guiMessage : MessageType:PeerAddress|srcSensorAgent:localhost:3427|targetSensorAgent:*:0|targetSensor:*
mtype : PeerAddress

*** Successfully bound with peer 15 (localhost:49172) ***
peerId : 15
peerFinger : localhost:49172

--- Connecting to Peer ---
peerConnectString : tcp://localhost:49172
Connected
sending  'TimeoutMs' message to peer...ok
waiting for response...ok
peer responded with OK ('TimeoutMs')
Timeout sent, set to 720000

### CONNECTED WITH PEER ###

--- startAggregation ---
sending  'Possible States' message to peer...ok
waiting for response...ok
peer responded with OK ('Possible States')
Possible states sent
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
Selected state sent
sending  'Start Aggregation' message to peer...ok
waiting for response...ok
peer responded with OK ('Start Aggregation')
Aggregation start sent

### AGGREGATION STARTED ###
Initial start aggregation sent
aggregationStarted = true

--- Listening to new selected states ---
gdeletConnectString : tcp://127.0.0.1:5555

Msg 1 : {'dt': '2018-03-18 09:58:40', 'peer': 5, 'globaleventid': 7766, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'EI', 'AvgTone': -10.0}
AvgTone : -10.000000
queueSize : 1
lastValueInQueue : -10.000000
--- computeSelectedState ---
selectedStateValue : -10.000000
numPossibleStates : 9
selectedState : SensorState: stateID=0({x.1=-10.0})
new selectedState : SensorState: stateID=0({x.1=-10.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent

Msg 2 : {'dt': '2018-03-18 09:59:49', 'peer': 5, 'globaleventid': 7867, 'sqldate': '20180318', 'ActionGeo_CountryCode': 'EI', 'AvgTone': -9.0}
AvgTone : -9.000000
queueSize : 2
lastValueInQueue : -9.000000
--- computeSelectedState ---
selectedStateValue : -9.000000
numPossibleStates : 9
selectedState : SensorState: stateID=0({x.1=-10.0})
new selectedState : SensorState: stateID=0({x.1=-10.0})
sending  'Selected State' message to peer...ok
waiting for response...ok
peer responded with OK ('Selected State')
New selected state sent
